#正则表达式原理步骤

##第一步：编译

>当你创建了一个正则表达式对象之后（使用一个正则表达式直接量或者RegExp 构造器），浏览器检查
你的模板有没有错误，然后将它转换成一个本机代码例程，用于执行匹配工作。如果你将正则表达式赋给
一个变量，你可以避免重复执行此步骤。
    
    
##第二步：设置起始位置

>当一个正则表达式投入使用时，首先要确定目标字符串中开始搜索的位置。它是字符串的起始位置，或
 者由正则表达式的lastIndex 属性指定，但是当它从第四步返回到这里的时候（因为尝试匹配失败），此位
 置将位于最后一次尝试起始位置推后一个字符的位置上。

>浏览器厂商优化正则表达式引擎的办法是，在这一阶段中通过早期预测跳过一些不必要的工作。例如，
 如果一个正则表达式以^开头，IE 和Chrome 通常判断在字符串起始位置上是否能够匹配，然后可避免愚蠢
 地搜索后续位置。另一个例子是匹配第三个字母是x 的字符串，一个聪明的办法是先找到x，然后再将起
 始位置回溯两个字符（例如，最近的Chrome 版本实现了这种优化）。
 

##第三步：匹配每个正则表达式的字元

>正则表达式一旦找好起始位置，它将一个一个地扫描目标文本和正则表达式模板。当一个特定字元匹配
 失败时，正则表达式将试图回溯到扫描之前的位置上，然后进入正则表达式其他可能的路径上。
 
##第四步：匹配成功或失败

>如果在字符串的当前位置上发现一个完全匹配，那么正则表达式宣布成功。如果正则表达式的所有可能
 路径都尝试过了，但是没有成功地匹配，那么正则表达式引擎回到第二步，从字符串的下一个字符重新尝
 试。只有字符串中的每个字符（以及最后一个字符后面的位置）都经历了这样的过程之后，还没有成功匹
 配，那么正则表达式就宣布彻底失败。
 
 #Summary
 
 >回溯既是正则表达式匹配功能基本的组成部分，又是正则表达式影响效率的常见原因。
 
 >回溯失控发生在正则表达式本应很快发现匹配的地方，因为某些特殊的匹配字符串动作，导致运行缓慢
  甚至浏览器崩溃。避免此问题的技术包括：使相邻字元互斥，避免嵌套量词对一个字符串的相同部分多次
  匹配，通过重复利用前瞻操作的原子特性去除不必要的回溯。
  
>正则表达式并不总是完成工作的最佳工具，尤其当你只是搜索一个文本字符串时。
